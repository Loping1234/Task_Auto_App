<!doctype html>
<html>
<head>
  <title>Edit Task</title>
  <link rel="stylesheet" href="/subadmin.css">
</head>
<body>
  <div class="layout">
    <div class="sidebar">
      <h1>Sub-admin Dashboard</h1>
      <a href="/dashboard">Back to Dashboard</a>
      <a href="/assign">Assign Task</a>
      <a href="/logout">Logout</a>
    </div>

    <div class="main">
      <h2>Edit Task</h2>
      <form method="POST" action="/update-task/<%= task._id %>" enctype="multipart/form-data">
        <input name="title" placeholder="Title" value="<%= task.title %>" required />
        <textarea name="description" placeholder="Description"><%= task.description || '' %></textarea>
        <input type="file" name="image" accept="image/*">
        <input type="date" name="startDate" value="<%= task.startDate ? new Date(task.startDate).toISOString().split('T')[0] : '' %>" />
        <input type="date" name="endDate" value="<%= task.endDate ? new Date(task.endDate).toISOString().split('T')[0] : '' %>" />
        <select name="status">
          <option <%= task.status === 'Pending' ? 'selected' : '' %>>Pending</option>
          <option <%= task.status === 'In Progress' ? 'selected' : '' %>>In Progress</option>
          <option <%= task.status === 'Completed' ? 'selected' : '' %>>Completed</option>
        </select>
        <select name="assigneeEmail" required>
          <% employees.forEach(emp => { %>
            <option value="<%= emp.email %>" <%= emp.email === task.assigneeEmail ? 'selected' : '' %>><%= emp.email %></option>
          <% }); %>
        </select>
        <button type="submit">Update Task</button>
      </form>
    </div>
  </div>
</body>
</html>